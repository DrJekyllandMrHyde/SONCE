<template name="Circuits_show">
  <section class="page circuits-show {{actingClass}}">
    <header>
    <nav class="navbar">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed"
          data-toggle="collapse" data-target="#top-navigation" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-menu" title={{_ 'Show Menu'}}></span>
          </button>
        </div>

        <div class="collapse navbar-collapse" id="top-navigation">
          {{#if editing}}
          <form class="js-edit-title navbar-form navbar-left" role="edit-title">
            <div class="form-group">
              <input type="text" class="form-control" name="name" value="{{circuit.name}}">
            </div>
            <button class="btn btn-default" type="text">
              <span class="icon-cancel js-cancel" title={{_ 'Cancel'}}></span>
            </button>
          </form>
          {{else}}
          <p class="navbar-text">
            <a class="js-favourite-circuit" href="#" title="{{_ 'Favourite Circuit'}}">
              <span class="icon-star-empty {{favourite}}"></span>
            </a>
          </p>
          <p class="navbar-text js-title">
            {{circuit.name}}
            <a class="js-edit-circuit" href="#">
              <span class="icon-edit"></span>
            </a>
          </p>
          {{/if}}


          <!-- right part of navigation -->
          <div class="navbar-header navbar-right">
            <button type="button" class="navbar-toggle collapsed"
            data-toggle="collapse" data-target="#top-navigation" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-menu" title={{_ 'Show Menu'}}></span>
            </button>
          </div>

          <div class="nav navbar-nav navbar-right btn-toolbar" role="toolbar" aria-label="...">
            <div class="btn-group" role="group-sm" aria-label="...">
              <button class="js-view-circuit btn btn-default navbar-btn {{#if viewing}}active{{/if}}" type="text">
                <span class="icon-eye"></span>
              </button>
              <button class="js-edit-circuit btn btn-default navbar-btn {{#if editing}}active{{/if}}" type="text">
                <span class="icon-edit"></span>
              </button>
              <button class="js-wire-circuit btn btn-default navbar-btn {{#if wiring}}active{{/if}}" type="text">
                <span class="icon-chart"></span>
              </button>
            </div>
          </div>

          <ul class="nav navbar-nav navbar-right">
          </ul>

          <div class="nav navbar-nav navbar-right options-mobile">
            <select class="js-action">
              <option disabled selected>{{_ 'Select an action'}}</option>
              {{#if circuit.owner}}
              <option value="public">{{_ 'Make Public'}}</option>
              {{else}}
              <option value="private">{{_ 'Make Private'}}</option>
              {{/if}}
              <option value="delete">{{_ 'Delete'}}</option>
            </select>
            <span class="icon-cog"></span>
          </div>

          <ul class="nav navbar-nav navbar-right"> <!-- options-web -->
            <li>
              {{#if editing}}
              <button class="js-toggle-circuit-privacy btn btn-default navbar-btn" type="text">
                {{#if circuit.owner}}
                <span class="icon-lock" title={{_ 'Make circuit public'}}></span>
                {{else}}
                <span class="icon-lock-open" title={{_ 'Make circuit private'}}></span>
                {{/if}}
              </button>
              {{/if}}
            </li>
          </ul>

        </div>
      </div>
    </nav>
    </header>


    <svg class="js-circuit-canvas circuit-items" width="100%" height="100%"
      preserveAspectRatio="xMinYMin meet">

      <defs>
        <marker id="activeWireEnd"
                markerWidth="8" markerHeight="8"
                refX="4" refY="4">
          <circle class="connector" cx="4" cy="4" r="3" >
            <animate dur="2s" attributeName="r" values="3; 1; 3" repeatCount="indefinite" />
          </circle>
        </marker>

        <marker id="wireLabel"
                markerWidth="20" markerHeight="8"
                refX="10" refY="4">
          <text class="connector" x="0" y="0" >wire</text>
        </marker>
      </defs>

      {{#if subscriptionsReady}}
      <g class="js-circuit">
        <path
        class="js-active-wire active-wire wire"
        marker-end="url(#activeWireEnd)" />
        {{> Active_element}}

        {{#each wire in wires}}
          {{> Wires_item (wireArgs wire)}}
        {{/each}}

        {{#each element in elements}}
          {{> Elements_item (elementArgs element)}}
        {{else}}
          <text class="title-message">{{_ 'No elements here'}}</text>
          <text class="subtitle-message">{{_ 'Add new elements using the field above'}}</text>
        {{/each}}

        {{> Active_pin}}

        {{#if editing }}
          {{#if selectedElement }}
            <!-- element menu -->
            {{> Element_edit_menu (elementMenuArgs "")}}
          {{/if}}
          {{#if selectedWire }}
            <!-- wire menu -->
            {{> Wire_edit_menu (wireMenuArgs "")}}
          {{/if}}

          {{> Operations}}
        {{/if}}
      </g>

        {{#if viewing }}
          {{#if selectedElement }}
            {{> Element_info (elementMenuArgs "")}}
          {{/if}}
          {{#if selectedWire }}
            <!-- {{> Wire_info (wireMenuArgs "")}} -->
          {{/if}}

        {{/if}}
      {{else}}
          <text class="title-message">{{_ 'Loading elements...'}}</text>
      {{/if}}
    </svg>
    <footer>
      <nav class="navbar">
        <div class="container-fluid">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed"
            data-toggle="collapse" data-target="#status-row" aria-expanded="false">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-menu" title={{_ 'Show status row'}}></span>
            </button>
          </div>
          <div class="collapse navbar-collapse" id="status-row">
            <div class="row">

              <div class="col-lg-4 col-md-6 col-xs-12">
                <p class="navbar-text">
                  <span class="icon-target"></span> {{mouse.x}}, {{mouse.y}}
                </p>

                {{#if wiring}}
                <p class="navbar-text">
                  {{wiringMode}}
                </p>
                {{/if}}

                {{#let condition=selection}}
                {{#if condition}}
                <p class="navbar-text">
                  <span class="icon-marquee" title="{{active}}: {{selection}}"></span>
                  <span class="js-cancel-selection icon-cancel" title={{_ 'Cancel'}}></span>
                </p>
                {{/if}}
                {{/let}}
              </div>

              <div class="col-lg-4 col-md-6 col-xs-12">
                <form class="js-set-zoom zoom-box navbar-form navbar-left">
                <div class="input-group input-group-sm">
                  <div class="input-group-btn">
                    <button class="js-zoom-out btn btn-default" title={{_ 'Go'}}>
                      <span class="icon-zoom-out"></span>
                    </button>
                  </div>
                  <input class="form-control" name="zoom" type="text" value="{{zoom}} %">
                  <div class="input-group-btn">
                    <button class="js-zoom-in btn btn-default" title={{_ 'Go'}}>
                      <span class="icon-zoom-in"></span>
                    </button>
                  </div>
                </div>
                </form>
                <p class="navbar-text">
                  {{pan}}
                </p>
              </div>

              <div class="col-lg-4 col-md-12">
                <form class="command-box navbar-form navbar-left">
                <div class="input-group input-group-sm">
                  <span class="input-group-addon">
                    <span class="icon-terminal"></span>
                  </span>
                  <input class="form-control" name="command-line" type="text">
                  <div class="input-group-btn">
                    <button class="js-go btn btn-default" title={{_ 'Go'}}>
                      <span class="icon-run"></span>
                    </button>
                    <button class="js-clear-input btn btn-default" title={{_ 'Clear'}}>
                      <span class="icon-eraser"></span>
                    </button>
                  </div>
                </div>
              </form>

              </div>
            </div>

          </div>
        </div>
      </nav>
    </footer>

  </section>
</template>
